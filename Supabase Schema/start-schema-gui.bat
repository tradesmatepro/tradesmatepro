@echo off
title TradeMate Pro - Database Schema Manager
echo.
echo üöÄ Starting TradeMate Pro Database Schema Manager...
echo.
echo This GUI application allows you to:
echo   ‚Ä¢ Manually dump database schema using WORKING db-dumper.js
echo   ‚Ä¢ Set up automatic schema dumping with custom intervals
echo   ‚Ä¢ Manage schema files and settings
echo   ‚Ä¢ View real-time logs
echo.
echo ‚ö†Ô∏è  NOTE: Using db-dumper.js (working connection) instead of pg-dump-equivalent.js (failing)
echo.
echo Starting GUI...
echo.

REM First try to run a quick schema dump to test connection
echo üß™ Testing database connection with working dumper...
node db-dumper.js --test-connection

if %ERRORLEVEL% NEQ 0 (
    echo.
    echo ‚ùå Database connection test failed
    echo The working db-dumper.js cannot connect to database
    echo Check your database credentials and network connection
    echo.
    pause
    exit /b 1
)

echo ‚úÖ Database connection successful!
echo.

python db-schema-gui.py

if %ERRORLEVEL% NEQ 0 (
    echo.
    echo ‚ùå Error starting the GUI application
    echo Make sure Python is installed and psycopg2-binary is available
    echo.
    echo üí° Alternative: Run manual schema dump with:
    echo    node db-dumper.js
    echo.
    pause
)
